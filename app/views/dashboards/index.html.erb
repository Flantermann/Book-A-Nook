<div class="container">

<%# Booking requests for spaces owned by other users %>

  <h1 class="heading-booking">My Bookings</h1>
  <% if @my_bookings.empty? %>
    <p> You have no bookings... yet! </p>
    <%= link_to "Browse reading spaces", '/spaces', class:"link-green" %>
  <% else %>
    <div class="trio-grid">
    <% @my_bookings.each do | booking |%>
      <div class="booking-card">
        <h3><%= booking.space.title %></h3>
        <% booking.space.photos.each do |photo|%>
          <%= cl_image_tag photo.key, class:"space-photo" %>
        <% end %>
        <p> You have requested to book this space from <%= booking.start_date %> to <%= booking.end_date %>.</p>
        <% if booking.status == "pending" %>
          <p>Your booking request is still pending</p>
        <% else %>
          <p>Your booking is confirmed ðŸŽ‰</p>
        <%  end %>
      </div>
    <% end %>
    </div>
  <% end %>

 <%# Booking requests for owned spaces %>

  <% if @my_rentals.length > 0 %>

    <% if @my_rentals.length == 1 %>
      <h1 class="heading-booking">Booking Requests for my space</h1>
    <% else %>
      <h1 class="heading-booking">Booking Requests for my spaces</h1>
    <% end %>

    <% @my_rentals.each do | rental | %>
      <h3><%= rental.title %></h3>
      <% if rental.bookings.empty?  %>
        <p>You have no booking request for this space yet. </p>
      <% end  %>
      <% rental.bookings.each do |booking| %>
        <% if booking.status == "pending" %>
          <p> You have a booking request for this space! ðŸŽ‰ </p>
          <h5>Requested Date:</h5>
          <p> From <%= booking.start_date %> to <%= booking.end_date %> </p>
          <%= link_to "Accept booking",  spaces_path, class:"btn-confirm-booking" %>
        <% elsif booking.status == "confirmed" %>
          <p> You have confirmed a booking for this space. </p>
        <% else %>
          <p> Something else. </p>
        <% end %>
      <% end %>
    <% end %>

  <% end %>


</div>
